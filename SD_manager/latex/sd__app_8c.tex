\hypertarget{sd__app_8c}{}\section{sd\+\_\+app.\+c File Reference}
\label{sd__app_8c}\index{sd\+\_\+app.\+c@{sd\+\_\+app.\+c}}


sd\+\_\+card functions for application  


{\ttfamily \#include $<$stdint.\+h$>$}\newline
{\ttfamily \#include $<$string.\+h$>$}\newline
{\ttfamily \#include \char`\"{}sd\+\_\+manage\+\_\+lib.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}sd\+\_\+app.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}crc32.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}Free\+R\+T\+O\+S.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}task.\+h\char`\"{}}\newline
Include dependency graph for sd\+\_\+app.\+c\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{sd__app_8c__incl}
\end{center}
\end{figure}
\subsection*{Macros}
\begin{DoxyCompactItemize}
\item 
\#define \hyperlink{sd__app_8c_a30c74414c5f2ce1866c6e0e0879748cb}{C\+S\+V\+\_\+\+C\+O\+M\+M\+E\+N\+T\+\_\+\+L\+I\+N\+E\+\_\+\+F\+I\+R\+S\+T\+\_\+\+C\+H\+AR}~\textquotesingle{}\#\textquotesingle{}
\item 
\#define \hyperlink{sd__app_8c_a69631d1f497ccd6c4b4a4d570f4e8a7a}{C\+S\+V\+\_\+\+Q\+U\+O\+T\+E\+\_\+\+C\+H\+AR}~\textquotesingle{}\char`\"{}\textquotesingle{}
\item 
\#define \hyperlink{sd__app_8c_ae0716c24fb751c324a63db353bf04f07}{C\+S\+V\+\_\+\+B\+U\+F\+F\+E\+R\+\_\+\+L\+E\+N\+G\+T\+H\+\_\+\+R\+E\+A\+D\+\_\+\+L\+I\+NE}~300
\end{DoxyCompactItemize}
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
int8\+\_\+t \hyperlink{sd__app_8c_a275b018ff39b6472d64bbb1eeabe6ea0}{i8\+\_\+handle\+\_\+csv\+\_\+file\+\_\+callback} (char $\ast$txtname, void($\ast$cb1)(void $\ast$, size\+\_\+t, void $\ast$), void($\ast$cb2)(int c, void $\ast$), void $\ast$c)
\begin{DoxyCompactList}\small\item\em process a csv file \end{DoxyCompactList}\item 
int8\+\_\+t \hyperlink{sd__app_8c_ad196e69ccf05c1d47e43749901bc50ba}{i8\+\_\+sdcard\+\_\+save\+\_\+schedule\+\_\+version} (char $\ast$version)
\begin{DoxyCompactList}\small\item\em save version of schedule file \end{DoxyCompactList}\item 
int8\+\_\+t \hyperlink{sd__app_8c_a95ae7469ae17b7cd923e6ebe8b1598b2}{i8\+\_\+sdcard\+\_\+get\+\_\+schedule\+\_\+version} (char $\ast$version)
\begin{DoxyCompactList}\small\item\em get version of schedule file \end{DoxyCompactList}\item 
int8\+\_\+t \hyperlink{sd__app_8c_a1df205e28a74e07c47c6accd37e3b5a6}{i8\+\_\+sdcard\+\_\+save\+\_\+mainflow} (uint8\+\_\+t u8\+\_\+location\+\_\+id, uint32\+\_\+t u32\+\_\+main\+\_\+flow)
\begin{DoxyCompactList}\small\item\em save flow rate of main flow meter for a given location \end{DoxyCompactList}\item 
int8\+\_\+t \hyperlink{sd__app_8c_ab63ec937ddc9cab6582404b12c6a7681}{i8\+\_\+sdcard\+\_\+get\+\_\+mainflow} (uint8\+\_\+t u8\+\_\+location\+\_\+id, uint32\+\_\+t $\ast$pu32\+\_\+main\+\_\+flow)
\begin{DoxyCompactList}\small\item\em get flow rate of main flow meter for a given location \end{DoxyCompactList}\item 
int8\+\_\+t \hyperlink{sd__app_8c_ae6f9db7bf77ba864120025515b8b00ed}{i8\+\_\+sdcard\+\_\+save\+\_\+channels\+\_\+flow} (uint8\+\_\+t u8\+\_\+location\+\_\+id, uint16\+\_\+t $\ast$pu16\+\_\+channels\+\_\+flow)
\begin{DoxyCompactList}\small\item\em save flow rate of 5 fertilizer channels for a given location \end{DoxyCompactList}\item 
int8\+\_\+t \hyperlink{sd__app_8c_abaa7c724857f50bc2de767a171581a5d}{i8\+\_\+sdcard\+\_\+get\+\_\+channels\+\_\+flow} (uint8\+\_\+t u8\+\_\+location\+\_\+id, uint16\+\_\+t $\ast$pu16\+\_\+channels\+\_\+flow)
\begin{DoxyCompactList}\small\item\em get flow rate of 5 fertilizer channels flow meter for a given location \end{DoxyCompactList}\end{DoxyCompactItemize}


\subsection{Detailed Description}
sd\+\_\+card functions for application 

\begin{DoxyAuthor}{Author}
Danh Pham 
\end{DoxyAuthor}
\begin{DoxyDate}{Date}
11 Nov 2020 
\end{DoxyDate}
\begin{DoxyVersion}{Version}
\+: 2.\+0.\+0 
\end{DoxyVersion}


\subsection{Macro Definition Documentation}
\mbox{\Hypertarget{sd__app_8c_ae0716c24fb751c324a63db353bf04f07}\label{sd__app_8c_ae0716c24fb751c324a63db353bf04f07}} 
\index{sd\+\_\+app.\+c@{sd\+\_\+app.\+c}!C\+S\+V\+\_\+\+B\+U\+F\+F\+E\+R\+\_\+\+L\+E\+N\+G\+T\+H\+\_\+\+R\+E\+A\+D\+\_\+\+L\+I\+NE@{C\+S\+V\+\_\+\+B\+U\+F\+F\+E\+R\+\_\+\+L\+E\+N\+G\+T\+H\+\_\+\+R\+E\+A\+D\+\_\+\+L\+I\+NE}}
\index{C\+S\+V\+\_\+\+B\+U\+F\+F\+E\+R\+\_\+\+L\+E\+N\+G\+T\+H\+\_\+\+R\+E\+A\+D\+\_\+\+L\+I\+NE@{C\+S\+V\+\_\+\+B\+U\+F\+F\+E\+R\+\_\+\+L\+E\+N\+G\+T\+H\+\_\+\+R\+E\+A\+D\+\_\+\+L\+I\+NE}!sd\+\_\+app.\+c@{sd\+\_\+app.\+c}}
\subsubsection{\texorpdfstring{C\+S\+V\+\_\+\+B\+U\+F\+F\+E\+R\+\_\+\+L\+E\+N\+G\+T\+H\+\_\+\+R\+E\+A\+D\+\_\+\+L\+I\+NE}{CSV\_BUFFER\_LENGTH\_READ\_LINE}}
{\footnotesize\ttfamily \#define C\+S\+V\+\_\+\+B\+U\+F\+F\+E\+R\+\_\+\+L\+E\+N\+G\+T\+H\+\_\+\+R\+E\+A\+D\+\_\+\+L\+I\+NE~300}

Maximum lenght of one csv line \mbox{\Hypertarget{sd__app_8c_a30c74414c5f2ce1866c6e0e0879748cb}\label{sd__app_8c_a30c74414c5f2ce1866c6e0e0879748cb}} 
\index{sd\+\_\+app.\+c@{sd\+\_\+app.\+c}!C\+S\+V\+\_\+\+C\+O\+M\+M\+E\+N\+T\+\_\+\+L\+I\+N\+E\+\_\+\+F\+I\+R\+S\+T\+\_\+\+C\+H\+AR@{C\+S\+V\+\_\+\+C\+O\+M\+M\+E\+N\+T\+\_\+\+L\+I\+N\+E\+\_\+\+F\+I\+R\+S\+T\+\_\+\+C\+H\+AR}}
\index{C\+S\+V\+\_\+\+C\+O\+M\+M\+E\+N\+T\+\_\+\+L\+I\+N\+E\+\_\+\+F\+I\+R\+S\+T\+\_\+\+C\+H\+AR@{C\+S\+V\+\_\+\+C\+O\+M\+M\+E\+N\+T\+\_\+\+L\+I\+N\+E\+\_\+\+F\+I\+R\+S\+T\+\_\+\+C\+H\+AR}!sd\+\_\+app.\+c@{sd\+\_\+app.\+c}}
\subsubsection{\texorpdfstring{C\+S\+V\+\_\+\+C\+O\+M\+M\+E\+N\+T\+\_\+\+L\+I\+N\+E\+\_\+\+F\+I\+R\+S\+T\+\_\+\+C\+H\+AR}{CSV\_COMMENT\_LINE\_FIRST\_CHAR}}
{\footnotesize\ttfamily \#define C\+S\+V\+\_\+\+C\+O\+M\+M\+E\+N\+T\+\_\+\+L\+I\+N\+E\+\_\+\+F\+I\+R\+S\+T\+\_\+\+C\+H\+AR~\textquotesingle{}\#\textquotesingle{}}

\mbox{\Hypertarget{sd__app_8c_a69631d1f497ccd6c4b4a4d570f4e8a7a}\label{sd__app_8c_a69631d1f497ccd6c4b4a4d570f4e8a7a}} 
\index{sd\+\_\+app.\+c@{sd\+\_\+app.\+c}!C\+S\+V\+\_\+\+Q\+U\+O\+T\+E\+\_\+\+C\+H\+AR@{C\+S\+V\+\_\+\+Q\+U\+O\+T\+E\+\_\+\+C\+H\+AR}}
\index{C\+S\+V\+\_\+\+Q\+U\+O\+T\+E\+\_\+\+C\+H\+AR@{C\+S\+V\+\_\+\+Q\+U\+O\+T\+E\+\_\+\+C\+H\+AR}!sd\+\_\+app.\+c@{sd\+\_\+app.\+c}}
\subsubsection{\texorpdfstring{C\+S\+V\+\_\+\+Q\+U\+O\+T\+E\+\_\+\+C\+H\+AR}{CSV\_QUOTE\_CHAR}}
{\footnotesize\ttfamily \#define C\+S\+V\+\_\+\+Q\+U\+O\+T\+E\+\_\+\+C\+H\+AR~\textquotesingle{}\char`\"{}\textquotesingle{}}



\subsection{Function Documentation}
\mbox{\Hypertarget{sd__app_8c_a275b018ff39b6472d64bbb1eeabe6ea0}\label{sd__app_8c_a275b018ff39b6472d64bbb1eeabe6ea0}} 
\index{sd\+\_\+app.\+c@{sd\+\_\+app.\+c}!i8\+\_\+handle\+\_\+csv\+\_\+file\+\_\+callback@{i8\+\_\+handle\+\_\+csv\+\_\+file\+\_\+callback}}
\index{i8\+\_\+handle\+\_\+csv\+\_\+file\+\_\+callback@{i8\+\_\+handle\+\_\+csv\+\_\+file\+\_\+callback}!sd\+\_\+app.\+c@{sd\+\_\+app.\+c}}
\subsubsection{\texorpdfstring{i8\+\_\+handle\+\_\+csv\+\_\+file\+\_\+callback()}{i8\_handle\_csv\_file\_callback()}}
{\footnotesize\ttfamily i8\+\_\+handle\+\_\+csv\+\_\+file\+\_\+callback (\begin{DoxyParamCaption}\item[{char $\ast$}]{txtname,  }\item[{void($\ast$)(void $\ast$, size\+\_\+t, void $\ast$)}]{cb1,  }\item[{void($\ast$)(int c, void $\ast$)}]{cb2,  }\item[{void $\ast$}]{c }\end{DoxyParamCaption})}



process a csv file 

Variables declare

Private functions prototype

Public functions


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em txtname} & name of file \\
\hline
\mbox{\tt in}  & {\em cb1} & function to parse row of file \\
\hline
\mbox{\tt in}  & {\em cb2} & function to parse feild in row \\
\hline
\mbox{\tt in}  & {\em c} & buffer of file \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
0\+: read success -\/1\+: can not init file -\/2\+: file is not exist -\/3\+: fail to parse file -\/4\+: C\+RC error 
\end{DoxyReturn}
Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=321pt]{sd__app_8c_a275b018ff39b6472d64bbb1eeabe6ea0_cgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{sd__app_8c_abaa7c724857f50bc2de767a171581a5d}\label{sd__app_8c_abaa7c724857f50bc2de767a171581a5d}} 
\index{sd\+\_\+app.\+c@{sd\+\_\+app.\+c}!i8\+\_\+sdcard\+\_\+get\+\_\+channels\+\_\+flow@{i8\+\_\+sdcard\+\_\+get\+\_\+channels\+\_\+flow}}
\index{i8\+\_\+sdcard\+\_\+get\+\_\+channels\+\_\+flow@{i8\+\_\+sdcard\+\_\+get\+\_\+channels\+\_\+flow}!sd\+\_\+app.\+c@{sd\+\_\+app.\+c}}
\subsubsection{\texorpdfstring{i8\+\_\+sdcard\+\_\+get\+\_\+channels\+\_\+flow()}{i8\_sdcard\_get\_channels\_flow()}}
{\footnotesize\ttfamily i8\+\_\+sdcard\+\_\+get\+\_\+channels\+\_\+flow (\begin{DoxyParamCaption}\item[{uint8\+\_\+t}]{u8\+\_\+location\+\_\+id,  }\item[{uint16\+\_\+t $\ast$}]{pu16\+\_\+channels\+\_\+flow }\end{DoxyParamCaption})}



get flow rate of 5 fertilizer channels flow meter for a given location 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em u8\+\_\+location\+\_\+id} & Id of given location \\
\hline
\mbox{\tt out}  & {\em pu16\+\_\+channels\+\_\+flow} & flow rate \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
0\+: read success -\/1\+: file is not exist -\/2\+: can not read 
\end{DoxyReturn}
Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{sd__app_8c_abaa7c724857f50bc2de767a171581a5d_cgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{sd__app_8c_ab63ec937ddc9cab6582404b12c6a7681}\label{sd__app_8c_ab63ec937ddc9cab6582404b12c6a7681}} 
\index{sd\+\_\+app.\+c@{sd\+\_\+app.\+c}!i8\+\_\+sdcard\+\_\+get\+\_\+mainflow@{i8\+\_\+sdcard\+\_\+get\+\_\+mainflow}}
\index{i8\+\_\+sdcard\+\_\+get\+\_\+mainflow@{i8\+\_\+sdcard\+\_\+get\+\_\+mainflow}!sd\+\_\+app.\+c@{sd\+\_\+app.\+c}}
\subsubsection{\texorpdfstring{i8\+\_\+sdcard\+\_\+get\+\_\+mainflow()}{i8\_sdcard\_get\_mainflow()}}
{\footnotesize\ttfamily i8\+\_\+sdcard\+\_\+get\+\_\+mainflow (\begin{DoxyParamCaption}\item[{uint8\+\_\+t}]{u8\+\_\+location\+\_\+id,  }\item[{uint32\+\_\+t $\ast$}]{pu32\+\_\+main\+\_\+flow }\end{DoxyParamCaption})}



get flow rate of main flow meter for a given location 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em u8\+\_\+location\+\_\+id} & Id of given location \\
\hline
\mbox{\tt out}  & {\em pu32\+\_\+main\+\_\+flow} & flow rate (real value $\ast$ 10) Ex\+: the real value is 10.\+5m3/h =$>$ save value\+: 105 \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
0\+: read success -\/1\+: file is not exist -\/2\+: can not read 
\end{DoxyReturn}
Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=346pt]{sd__app_8c_ab63ec937ddc9cab6582404b12c6a7681_cgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{sd__app_8c_a95ae7469ae17b7cd923e6ebe8b1598b2}\label{sd__app_8c_a95ae7469ae17b7cd923e6ebe8b1598b2}} 
\index{sd\+\_\+app.\+c@{sd\+\_\+app.\+c}!i8\+\_\+sdcard\+\_\+get\+\_\+schedule\+\_\+version@{i8\+\_\+sdcard\+\_\+get\+\_\+schedule\+\_\+version}}
\index{i8\+\_\+sdcard\+\_\+get\+\_\+schedule\+\_\+version@{i8\+\_\+sdcard\+\_\+get\+\_\+schedule\+\_\+version}!sd\+\_\+app.\+c@{sd\+\_\+app.\+c}}
\subsubsection{\texorpdfstring{i8\+\_\+sdcard\+\_\+get\+\_\+schedule\+\_\+version()}{i8\_sdcard\_get\_schedule\_version()}}
{\footnotesize\ttfamily i8\+\_\+sdcard\+\_\+get\+\_\+schedule\+\_\+version (\begin{DoxyParamCaption}\item[{char $\ast$}]{version }\end{DoxyParamCaption})}



get version of schedule file 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt out}  & {\em version} & version of schedule file \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
0\+: read success -\/1\+: file is not exist -\/2\+: can not write 
\end{DoxyReturn}
Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=342pt]{sd__app_8c_a95ae7469ae17b7cd923e6ebe8b1598b2_cgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{sd__app_8c_ae6f9db7bf77ba864120025515b8b00ed}\label{sd__app_8c_ae6f9db7bf77ba864120025515b8b00ed}} 
\index{sd\+\_\+app.\+c@{sd\+\_\+app.\+c}!i8\+\_\+sdcard\+\_\+save\+\_\+channels\+\_\+flow@{i8\+\_\+sdcard\+\_\+save\+\_\+channels\+\_\+flow}}
\index{i8\+\_\+sdcard\+\_\+save\+\_\+channels\+\_\+flow@{i8\+\_\+sdcard\+\_\+save\+\_\+channels\+\_\+flow}!sd\+\_\+app.\+c@{sd\+\_\+app.\+c}}
\subsubsection{\texorpdfstring{i8\+\_\+sdcard\+\_\+save\+\_\+channels\+\_\+flow()}{i8\_sdcard\_save\_channels\_flow()}}
{\footnotesize\ttfamily i8\+\_\+sdcard\+\_\+save\+\_\+channels\+\_\+flow (\begin{DoxyParamCaption}\item[{uint8\+\_\+t}]{u8\+\_\+location\+\_\+id,  }\item[{uint16\+\_\+t $\ast$}]{pu16\+\_\+channels\+\_\+flow }\end{DoxyParamCaption})}



save flow rate of 5 fertilizer channels for a given location 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em Id} & of given location \\
\hline
\mbox{\tt in}  & {\em pu16\+\_\+channels\+\_\+flow} & flow rate \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
0\+: read success -\/1\+: file is not exist -\/2\+: can not write 
\end{DoxyReturn}
Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{sd__app_8c_ae6f9db7bf77ba864120025515b8b00ed_cgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{sd__app_8c_a1df205e28a74e07c47c6accd37e3b5a6}\label{sd__app_8c_a1df205e28a74e07c47c6accd37e3b5a6}} 
\index{sd\+\_\+app.\+c@{sd\+\_\+app.\+c}!i8\+\_\+sdcard\+\_\+save\+\_\+mainflow@{i8\+\_\+sdcard\+\_\+save\+\_\+mainflow}}
\index{i8\+\_\+sdcard\+\_\+save\+\_\+mainflow@{i8\+\_\+sdcard\+\_\+save\+\_\+mainflow}!sd\+\_\+app.\+c@{sd\+\_\+app.\+c}}
\subsubsection{\texorpdfstring{i8\+\_\+sdcard\+\_\+save\+\_\+mainflow()}{i8\_sdcard\_save\_mainflow()}}
{\footnotesize\ttfamily i8\+\_\+sdcard\+\_\+save\+\_\+mainflow (\begin{DoxyParamCaption}\item[{uint8\+\_\+t}]{u8\+\_\+location\+\_\+id,  }\item[{uint32\+\_\+t}]{u32\+\_\+main\+\_\+flow }\end{DoxyParamCaption})}



save flow rate of main flow meter for a given location 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em u8\+\_\+location\+\_\+id} & Id of given location \\
\hline
\mbox{\tt in}  & {\em u32\+\_\+main\+\_\+flow} & flow rate (real value $\ast$ 10) Ex\+: the real value is 10.\+5m3/h =$>$ save value\+: 105 \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
0\+: read success -\/1\+: file is not exist -\/2\+: can not write 
\end{DoxyReturn}
Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{sd__app_8c_a1df205e28a74e07c47c6accd37e3b5a6_cgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{sd__app_8c_ad196e69ccf05c1d47e43749901bc50ba}\label{sd__app_8c_ad196e69ccf05c1d47e43749901bc50ba}} 
\index{sd\+\_\+app.\+c@{sd\+\_\+app.\+c}!i8\+\_\+sdcard\+\_\+save\+\_\+schedule\+\_\+version@{i8\+\_\+sdcard\+\_\+save\+\_\+schedule\+\_\+version}}
\index{i8\+\_\+sdcard\+\_\+save\+\_\+schedule\+\_\+version@{i8\+\_\+sdcard\+\_\+save\+\_\+schedule\+\_\+version}!sd\+\_\+app.\+c@{sd\+\_\+app.\+c}}
\subsubsection{\texorpdfstring{i8\+\_\+sdcard\+\_\+save\+\_\+schedule\+\_\+version()}{i8\_sdcard\_save\_schedule\_version()}}
{\footnotesize\ttfamily i8\+\_\+sdcard\+\_\+save\+\_\+schedule\+\_\+version (\begin{DoxyParamCaption}\item[{char $\ast$}]{version }\end{DoxyParamCaption})}



save version of schedule file 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em version} & version of schedule file \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
0\+: read success -\/2\+: can not write 
\end{DoxyReturn}
Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{sd__app_8c_ad196e69ccf05c1d47e43749901bc50ba_cgraph}
\end{center}
\end{figure}
